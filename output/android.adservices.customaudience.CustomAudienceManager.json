{
  "filePath" : "/home/maryam/clearblue/files/android-source-35/android/adservices/customaudience/CustomAudienceManager.java",
  "packageName" : "android.adservices.customaudience",
  "className" : "CustomAudienceManager",
  "comment" : " CustomAudienceManager provides APIs for app and ad-SDKs to join / leave custom audiences. ",
  "links" : [ ],
  "variables" : [ {
    "name" : "sLogger",
    "type" : "LoggerFactory.Logger",
    "comment" : "",
    "links" : [ ]
  }, {
    "name" : "CUSTOM_AUDIENCE_SERVICE",
    "type" : "String",
    "comment" : "\n     * Constant that represents the service name for {@link CustomAudienceManager} to be used in\n     * {@link android.adservices.AdServicesFrameworkInitializer#registerServiceWrappers}\n     *\n     * @hide\n     ",
    "links" : [ "android.adservices.customaudience.CustomAudienceManager", "android.adservices.AdServicesFrameworkInitializer#registerServiceWrappers" ]
  }, {
    "name" : "mContext",
    "type" : "Context",
    "comment" : "",
    "links" : [ ]
  }, {
    "name" : "mServiceBinder",
    "type" : "ServiceBinder<ICustomAudienceService>",
    "comment" : "",
    "links" : [ ]
  } ],
  "methods" : [ {
    "name" : "public static CustomAudienceManager get(@NonNull Context context)",
    "returnType" : "CustomAudienceManager",
    "comment" : "\n     * Factory method for creating an instance of CustomAudienceManager.\n     *\n     * @param context The {@link Context} to use\n     * @return A {@link CustomAudienceManager} instance\n     ",
    "links" : [ "android.adservices.customaudience.CustomAudienceManager", "android.app.sdksandbox.SandboxedSdkContext" ]
  }, {
    "name" : "public CustomAudienceManager initialize(@NonNull Context context)",
    "returnType" : "CustomAudienceManager",
    "comment" : "\n     * Initializes {@link CustomAudienceManager} with the given {@code context}.\n     *\n     * <p>This method is called by the {@link SandboxedSdkContext} to propagate the correct context.\n     * For more information check the javadoc on the {@link\n     * android.app.sdksandbox.SdkSandboxSystemServiceRegistry}.\n     *\n     * @hide\n     * @see android.app.sdksandbox.SdkSandboxSystemServiceRegistry\n     ",
    "links" : [ "android.adservices.customaudience.CustomAudienceManager", "android.app.sdksandbox.SandboxedSdkContext", "android.app.sdksandbox.SdkSandboxSystemServiceRegistry" ]
  }, {
    "name" : "public TestCustomAudienceManager getTestCustomAudienceManager()",
    "returnType" : "TestCustomAudienceManager",
    "comment" : " Create a service with test-enabling APIs ",
    "links" : [ ]
  }, {
    "name" : " ICustomAudienceService getService()",
    "returnType" : "ICustomAudienceService",
    "comment" : "",
    "links" : [ ]
  }, {
    "name" : "public void joinCustomAudience(@NonNull JoinCustomAudienceRequest joinCustomAudienceRequest, @NonNull @CallbackExecutor Executor executor, @NonNull OutcomeReceiver<Object, Exception> receiver)",
    "returnType" : "void",
    "comment" : "\n     * Adds the user to the given {@link CustomAudience}.\n     *\n     * <p>An attempt to register the user for a custom audience with the same combination of {@code\n     * ownerPackageName}, {@code buyer}, and {@code name} will cause the existing custom audience's\n     * information to be overwritten, including the list of ads data.\n     *\n     * <p>Note that the ads list can be completely overwritten by the daily background fetch job.\n     *\n     * <p>This call fails with an {@link SecurityException} if\n     *\n     * <ol>\n     *   <li>the {@code ownerPackageName} is not calling app's package name and/or\n     *   <li>the buyer is not authorized to use the API.\n     * </ol>\n     *\n     * <p>This call fails with an {@link IllegalArgumentException} if\n     *\n     * <ol>\n     *   <li>the storage limit has been exceeded by the calling application and/or\n     *   <li>any URI parameters in the {@link CustomAudience} given are not authenticated with the\n     *       {@link CustomAudience} buyer.\n     * </ol>\n     *\n     * <p>This call fails with {@link LimitExceededException} if the calling package exceeds the\n     * allowed rate limits and is throttled.\n     *\n     * <p>This call fails with an {@link IllegalStateException} if an internal service error is\n     * encountered.\n     ",
    "links" : [ "android.os.LimitExceededException", "IllegalStateException", "android.adservices.customaudience.CustomAudience", "SecurityException", "IllegalArgumentException" ]
  }, {
    "name" : "public void fetchAndJoinCustomAudience(@NonNull FetchAndJoinCustomAudienceRequest fetchAndJoinCustomAudienceRequest, @NonNull @CallbackExecutor Executor executor, @NonNull OutcomeReceiver<Object, Exception> receiver)",
    "returnType" : "void",
    "comment" : "\n     * Adds the user to the {@link CustomAudience} fetched from a {@code fetchUri}.\n     *\n     * <p>An attempt to register the user for a custom audience with the same combination of {@code\n     * ownerPackageName}, {@code buyer}, and {@code name} will cause the existing custom audience's\n     * information to be overwritten, including the list of ads data.\n     *\n     * <p>Note that the ads list can be completely overwritten by the daily background fetch job.\n     *\n     * <p>This call fails with an {@link SecurityException} if\n     *\n     * <ol>\n     *   <li>the {@code ownerPackageName} is not calling app's package name and/or\n     *   <li>the buyer is not authorized to use the API.\n     * </ol>\n     *\n     * <p>This call fails with an {@link IllegalArgumentException} if\n     *\n     * <ol>\n     *   <li>the storage limit has been exceeded by the calling application and/or\n     *   <li>any URI parameters in the {@link CustomAudience} given are not authenticated with the\n     *       {@link CustomAudience} buyer.\n     * </ol>\n     *\n     * <p>This call fails with {@link LimitExceededException} if the calling package exceeds the\n     * allowed rate limits and is throttled.\n     *\n     * <p>This call fails with an {@link IllegalStateException} if an internal service error is\n     * encountered.\n     ",
    "links" : [ "android.os.LimitExceededException", "IllegalStateException", "android.adservices.customaudience.CustomAudience", "SecurityException", "IllegalArgumentException" ]
  }, {
    "name" : "public void leaveCustomAudience(@NonNull LeaveCustomAudienceRequest leaveCustomAudienceRequest, @NonNull @CallbackExecutor Executor executor, @NonNull OutcomeReceiver<Object, Exception> receiver)",
    "returnType" : "void",
    "comment" : "\n     * Attempts to remove a user from a custom audience by deleting any existing {@link\n     * CustomAudience} data, identified by {@code ownerPackageName}, {@code buyer}, and {@code\n     * name}.\n     *\n     * <p>This call fails with an {@link SecurityException} if\n     *\n     * <ol>\n     *   <li>the {@code ownerPackageName} is not calling app's package name; and/or\n     *   <li>the buyer is not authorized to use the API.\n     * </ol>\n     *\n     * <p>This call fails with {@link LimitExceededException} if the calling package exceeds the\n     * allowed rate limits and is throttled.\n     *\n     * <p>This call does not inform the caller whether the custom audience specified existed in\n     * on-device storage. In other words, it will fail silently when a buyer attempts to leave a\n     * custom audience that was not joined.\n     ",
    "links" : [ "android.os.LimitExceededException", "android.adservices.customaudience.CustomAudience", "SecurityException" ]
  }, {
    "name" : "public void scheduleCustomAudienceUpdate(@NonNull ScheduleCustomAudienceUpdateRequest request, @NonNull @CallbackExecutor Executor executor, @NonNull AdServicesOutcomeReceiver<Object, Exception> receiver)",
    "returnType" : "void",
    "comment" : "\n     * Allows the API caller to schedule a deferred Custom Audience update. For each update the user\n     * will be able to join or leave a set of CustomAudiences.\n     *\n     * <p>This API only guarantees minimum delay to make the update, and does not guarantee a\n     * maximum deadline within which the update request would be made. Scheduled updates could be\n     * batched and queued together to preserve system resources, thus exact delay time is not\n     * guaranteed.\n     *\n     * <p>In order to conserve system resources the API will make and update request only if the\n     * following constraints are satisfied\n     *\n     * <ol>\n     *   <li>The device is using an un-metered internet connection\n     *   <li>The device battery is not low\n     *   <li>The device storage is not low\n     * </ol>\n     *\n     * <p>When the deferred update is triggered the API makes a POST request to the provided\n     * updateUri with the request body containing a JSON of Partial Custom Audience list.\n     *\n     * <p>An example of request body containing list of Partial Custom Audiences would look like:\n     *\n     * <pre>{@code\n     * {\n     *     \"partial_custom_audience_data\": [\n     *         {\n     *             \"name\": \"running_shoes\",\n     *             \"activation_time\": 1644375856883,\n     *             \"expiration_time\": 1644375908397\n     *         },\n     *         {\n     *             \"name\": \"casual_shirt\",\n     *             \"user_bidding_signals\": {\n     *                 \"signal1\": \"value1\"\n     *             }\n     *         }\n     *     ]\n     * }\n     * }</pre>\n     *\n     * <p>In response the API expects a JSON in return with following keys:\n     *\n     * <ol>\n     *   <li>\"join\" : Should contain list containing full data for a {@link CustomAudience} object\n     *   <li>\"leave\" : List of {@link CustomAudience} names that user is intended to be removed from\n     * </ol>\n     *\n     * <p>An example of JSON in response would look like:\n     *\n     * <pre>{@code\n     * {\n     *     \"join\": [\n     *         {\n     *             \"name\": \"running-shoes\",\n     *             \"activation_time\": 1680603133,\n     *             \"expiration_time\": 1680803133,\n     *             \"user_bidding_signals\": {\n     *                 \"signal1\": \"value\"\n     *             },\n     *             \"trusted_bidding_data\": {\n     *                 \"trusted_bidding_uri\": \"https://example-dsp.com/\",\n     *                 \"trusted_bidding_keys\": [\n     *                     \"k1\",\n     *                     \"k2\"\n     *                 ]\n     *             },\n     *             \"bidding_logic_uri\": \"https://example-dsp.com/...\",\n     *             \"ads\": [\n     *                 {\n     *                     \"render_uri\": \"https://example-dsp.com/...\",\n     *                     \"metadata\": {},\n     *                     \"ad_filters\": {\n     *                         \"frequency_cap\": {\n     *                             \"win\": [\n     *                                 {\n     *                                     \"ad_counter_key\": \"key1\",\n     *                                     \"max_count\": 2,\n     *                                     \"interval_in_seconds\": 60\n     *                                 }\n     *                             ],\n     *                             \"view\": [\n     *                                 {\n     *                                     \"ad_counter_key\": \"key2\",\n     *                                     \"max_count\": 10,\n     *                                     \"interval_in_seconds\": 3600\n     *                                 }\n     *                             ]\n     *                         },\n     *                         \"app_install\": {\n     *                             \"package_names\": [\n     *                                 \"package.name.one\"\n     *                             ]\n     *                         }\n     *                     }\n     *                 }\n     *             ]\n     *         },\n     *         {}\n     *     ],\n     *     \"leave\": [\n     *         \"tennis_shoes\",\n     *         \"formal_shirt\"\n     *     ]\n     * }\n     * }</pre>\n     *\n     * <p>An attempt to register the user for a custom audience from the same application with the\n     * same combination of {@code buyer} inferred from Update Uri, and {@code name} will cause the\n     * existing custom audience's information to be overwritten, including the list of ads data.\n     *\n     * <p>In case information related to any of the CustomAudience to be joined is malformed, the\n     * deferred update would silently ignore that single Custom Audience\n     *\n     * <p>When removing this API attempts to remove a user from a custom audience by deleting any\n     * existing {@link CustomAudience} identified by owner i.e. calling app, {@code buyer} inferred\n     * from Update Uri, and {@code name}\n     *\n     * <p>Any partial custom audience field set by the caller cannot be overridden by the custom\n     * audience fetched from the {@code updateUri}. Given multiple Custom Audiences could be\n     * returned by a DSP we will match the override restriction based on the names of the Custom\n     * Audiences. A DSP may skip returning a full Custom Audience for any Partial Custom Audience in\n     * request.\n     *\n     * <p>In case the API encounters transient errors while making the network call for update, like\n     * 5xx, connection timeout, rate limit exceeded it would employ retries, with backoff up to a\n     * 'retry limit' number of times. The API would also honor 'retry-after' header specifying the\n     * min amount of seconds by which the next request should be delayed.\n     *\n     * <p>In a scenario where server responds with a '429 status code', signifying 'Too many\n     * requests', API would place the deferred update and other updates for the same requester i.e.\n     * caller package and buyer combination, in a quarantine. The quarantine records would be\n     * referred before making any calls for requesters, and request will only be made once the\n     * quarantine period has expired. The applications can leverage the `retry-after` header to\n     * self-quarantine for traffic management to their servers and prevent being overwhelmed with\n     * requests. The default quarantine value will be set to 30 minutes.\n     *\n     * <p>This call fails with an {@link SecurityException} if\n     *\n     * <ol>\n     *   <li>the {@code ownerPackageName} is not calling app's package name; and/or\n     *   <li>the buyer, inferred from {@code updateUri}, is not authorized to use the API.\n     * </ol>\n     *\n     * <p>This call fails with an {@link IllegalArgumentException} if\n     *\n     * <ol>\n     *   <li>the provided {@code updateUri} is invalid or malformed.\n     *   <li>the provided {@code delayTime} is not within permissible bounds\n     *   <li>the combined size of {@code partialCustomAudience} list is larger than allowed limits\n     * </ol>\n     *\n     * <p>This call fails with {@link LimitExceededException} if the calling package exceeds the\n     * allowed rate limits and is throttled.\n     ",
    "links" : [ "android.os.LimitExceededException", "android.adservices.customaudience.CustomAudience", "SecurityException", "IllegalArgumentException" ]
  }, {
    "name" : "private String getCallerPackageName()",
    "returnType" : "String",
    "comment" : "",
    "links" : [ ]
  } ],
  "methodNames" : [ "public static CustomAudienceManager get(@NonNull Context context)", "public CustomAudienceManager initialize(@NonNull Context context)", "public TestCustomAudienceManager getTestCustomAudienceManager()", " ICustomAudienceService getService()", "public void joinCustomAudience(@NonNull JoinCustomAudienceRequest joinCustomAudienceRequest, @NonNull @CallbackExecutor Executor executor, @NonNull OutcomeReceiver<Object, Exception> receiver)", "public void fetchAndJoinCustomAudience(@NonNull FetchAndJoinCustomAudienceRequest fetchAndJoinCustomAudienceRequest, @NonNull @CallbackExecutor Executor executor, @NonNull OutcomeReceiver<Object, Exception> receiver)", "public void leaveCustomAudience(@NonNull LeaveCustomAudienceRequest leaveCustomAudienceRequest, @NonNull @CallbackExecutor Executor executor, @NonNull OutcomeReceiver<Object, Exception> receiver)", "public void scheduleCustomAudienceUpdate(@NonNull ScheduleCustomAudienceUpdateRequest request, @NonNull @CallbackExecutor Executor executor, @NonNull AdServicesOutcomeReceiver<Object, Exception> receiver)", "private String getCallerPackageName()" ],
  "variableNames" : [ "sLogger", "CUSTOM_AUDIENCE_SERVICE", "mContext", "mServiceBinder" ]
}